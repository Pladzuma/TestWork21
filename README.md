# TestWork21 — WordPress Child Theme (Storefront)

## Описание

Дочерняя тема для WordPress Storefront, выполненная в рамках тестового задания.

Реализует:
- Кастомный тип записи **Cities**
- Кастомную таксономию **Countries** для городов
- Метаполя (широта и долгота)
- Виджет температуры города через OpenWeatherMap
- Ajax-поиск по городам в таблице (нативный JS)
- Страницу с таблицей "страна — город — температура"
- Кастомные хуки до и после таблицы
- Подробную документацию к каждому файлу и функции

---

## Установка

1. Установите WordPress и тему Storefront:  
   [https://wordpress.org/themes/storefront/](https://wordpress.org/themes/storefront/)
2. Скопируйте папку `storefront-child` в директорию `/wp-content/themes/`.
3. Активируйте дочернюю тему Storefront Child через админку WordPress (**Внешний вид → Темы**).

---

## Важно: как указать API-ключ OpenWeatherMap

1. Зарегистрируйтесь бесплатно на [openweathermap.org/api](https://openweathermap.org/api) и получите персональный API-ключ.
2. Откройте файл `functions.php` в папке вашей темы (`storefront-child`).
3. Найдите строку:
   ```php
   define('OPENWEATHERMAP_API_KEY', 'ваш_ключ_сюда');
   ```
4. Замените `'ваш_ключ_сюда'` на ваш ключ (в кавычках).
5. Сохраните файл.

**Без корректного ключа температура отображаться не будет.**

---

## Использование

1. В админке WordPress появится новый тип записи **Cities**:
    - Создайте несколько городов.
    - Заполните метаполя "Широта" (latitude) и "Долгота" (longitude).
    - Присвойте городам страны в таксономии **Countries**.
2. В разделе **Виджеты** добавьте виджет **City Temperature Widget** в любую область сайта, выберите нужный город.
3. Создайте новую страницу и в атрибутах страницы выберите шаблон **Cities Table**:
    - На этой странице появится таблица со всеми городами, странами и температурами.
    - Для поиска по городу используйте поле поиска (работает без перезагрузки через ajax).

---

## Дополнительно

- Для теста ajax-поиска просто введите часть названия города в поле поиска — таблица обновится без перезагрузки.
- Для расширения таблицы используйте хуки `cities_table_before` и `cities_table_after`.
- Весь код снабжён подробной документацией (PHPDoc и пояснениями).

---

## Структура файлов

```
storefront-child/
├── functions.php                         # Основная логика, регистрация CPT, таксономии, ajax, хуки
├── style.css                             # Стиль темы
├── page-cities-table.php                 # Кастомный шаблон страницы с таблицей и поиском
├── widgets/
│   └── class-city-temperature-widget.php # Файл с виджетом
└── README.md                             # Инструкция по установке и запуску (вы читаете этот файл)
```

---

## Контакты

Если возникли вопросы по заданию или коду — готов ответить и оперативно пояснить любой раздел.
